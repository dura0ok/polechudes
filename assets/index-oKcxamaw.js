var w=(r,e,t)=>{if(!e.has(r))throw TypeError("Cannot "+t)};var o=(r,e,t)=>(w(r,e,"read from private field"),t?t.call(r):e.get(r)),h=(r,e,t)=>{if(e.has(r))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(r):e.set(r,t)},I=(r,e,t,n)=>(w(r,e,"write to private field"),n?n.call(r,t):e.set(r,t),t);var p=(r,e,t,n)=>({set _(s){I(r,e,s,t)},get _(){return o(r,e,n)}}),C=(r,e,t)=>(w(r,e,"access private method"),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const L of i.addedNodes)L.tagName==="LINK"&&L.rel==="modulepreload"&&n(L)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();var l,g,c,u,f,m,A;const d=class d{constructor(){h(this,m);h(this,c,0);h(this,u,new Set);h(this,f,new Set)}generateNewWord(){o(this,c)<o(d,l).length-1?(p(this,c)._++,C(this,m,A).call(this)):alert("Там слов нет")}prevWordGenerate(){o(this,c)>0?(p(this,c)._--,C(this,m,A).call(this)):alert("Там слов нет")}guessLetter(e,t){if(o(this,u).has(e))throw new Error(`Буква "${e}" уже была угадана ранее.`);const n=o(d,l)[o(this,c)],s=e.toLowerCase();if(n.includes(s)){for(let i=0;i<n.length;i++)n[i].toLowerCase()===s&&(o(this,u).add(s),(t===null||i===t)&&o(this,f).add(i));return!0}else return o(this,u).add(s),!1}hasGuessedLetterAtPosition(e,t){const n=e.toLowerCase();if(t===null){const s=o(d,l)[o(this,c)];return[...Array(s.length).keys()].every(i=>s[i]===e&&o(this,f).has(i)||s[i]!==e)}else return o(this,f).has(t)&&o(this,u).has(n)}guessLetterAtPosition(e,t){if(this.hasGuessedLetterAtPosition(e,t))throw new Error(`Буква "${e}" уже была угадана ранее.`);const n=o(d,l)[o(this,c)],s=e.toLowerCase();if(n[t].toLowerCase()===s)o(this,u).add(s),o(this,f).add(t);else throw new Error(`Неверная буква "${e}" в данной позиции.`)}allLettersGuessed(){const e=o(d,l)[o(this,c)];for(let t=0;t<e.length;t++){const n=e[t].toLowerCase();if(!this.hasGuessedLetterAtPosition(n,null))return!1}return!0}getCurrentWord(){return o(d,l)[o(this,c)]}isSuperWord(){return o(d,g).includes(o(d,l)[o(this,c)])}};l=new WeakMap,g=new WeakMap,c=new WeakMap,u=new WeakMap,f=new WeakMap,m=new WeakSet,A=function(){o(this,u).clear(),o(this,f).clear()},h(d,l,["колобок","апельсин","кирибати","фейерверк","бонбоньерка","шерхебель","простоквашино","газонокосилка"]),h(d,g,["газонокосилка"]);let E=d;function S(r){return new Promise(function(e,t){const n=new Audio;n.preload="auto",n.autoplay=!0,n.onerror=t,n.onended=e,n.src=r})}const a=new E,W=document.getElementById("wordDisplay"),G=document.getElementById("keyboard"),k=document.getElementById("msg");function y(){const r=a.getCurrentWord();k.innerText="",a.isSuperWord()&&(k.innerText="Суперигра"),r&&(W.innerHTML="");for(let e=0;e<r.length;e++){const t=r[e],n=document.createElement("span");n.classList.add("word-letter"),a.hasGuessedLetterAtPosition(t.toLowerCase(),e)||t===" "?n.textContent=t:n.textContent="_",W.appendChild(n)}}function b(){const r="абвгдеёжзийклмнопрстуфхцчшщъыьэюя";for(const e of r){const t=document.createElement("div");t.classList.add("key"),t.textContent=e,t.addEventListener("click",()=>q(e,t)),G.appendChild(t)}}async function q(r,e){try{const t=a.guessLetter(r.toLowerCase(),null);K(t),t?v(e):(await S("./sounds/incorrect.mp3"),B(e)),y(),a.allLettersGuessed()&&await x()}catch(t){alert(t.message)}}function v(r){r.classList.add("correct")}function B(r){r.classList.add("incorrect")}async function N(r){const e=Array.from(r.target.parentNode.children).indexOf(r.target),t=a.getCurrentWord()[e];a.hasGuessedLetterAtPosition(t.toLowerCase(),e)||(a.guessLetterAtPosition(t,e),a.hasGuessedLetterAtPosition(t,null)&&v(O(t)),y(),a.allLettersGuessed()&&await x())}function O(r){const e=document.querySelectorAll(".key");for(const t of e)if(t.textContent===r)return t;return null}async function x(){a.generateNewWord(),S("./sounds/correct.mp3").then(()=>{alert("Поздравляем! Вы отгадали слово."),y(),P()})}function P(){document.querySelectorAll(".key").forEach(r=>r.classList.remove("incorrect")),document.querySelectorAll(".key").forEach(r=>r.classList.remove("correct"))}function K(r){const e=document.querySelector("#imageContainer"),t=e.querySelector("img"),n="images/",s=r?"correct.png":"incorrect.png";t.src=n+s,e.style.display="block",setTimeout(()=>{e.style.display="none"},3e3)}y();b();W.addEventListener("click",async r=>{r.target.classList.contains("word-letter")&&await N(r)});document.getElementById("nextWordButton").addEventListener("click",async()=>{a.generateNewWord(),document.querySelector("#imageContainer").style.display="none",y(),P()});document.getElementById("prevWordButton").addEventListener("click",async()=>{a.prevWordGenerate(),document.querySelector("#imageContainer").style.display="none",y(),P()});
