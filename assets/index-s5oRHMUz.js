var w=(r,e,t)=>{if(!e.has(r))throw TypeError("Cannot "+t)};var n=(r,e,t)=>(w(r,e,"read from private field"),t?t.call(r):e.get(r)),h=(r,e,t)=>{if(e.has(r))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(r):e.set(r,t)},E=(r,e,t,s)=>(w(r,e,"write to private field"),s?s.call(r,t):e.set(r,t),t);var p=(r,e,t,s)=>({set _(o){E(r,e,o,t)},get _(){return n(r,e,s)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const m of c.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&s(m)}).observe(document,{childList:!0,subtree:!0});function t(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(o){if(o.ep)return;o.ep=!0;const c=t(o);fetch(o.href,c)}})();var u,l,i,f;const d=class d{constructor(){h(this,l,0);h(this,i,new Set);h(this,f,new Set)}generateNewWord(){p(this,l)._++,n(this,i).clear(),n(this,f).clear()}guessLetter(e,t){if(n(this,i).has(e))throw new Error(`Буква "${e}" уже была угадана ранее.`);const s=n(d,u)[n(this,l)],o=e.toLowerCase();if(s.includes(o)){for(let c=0;c<s.length;c++)s[c].toLowerCase()===o&&(n(this,i).add(o),(t===null||c===t)&&n(this,f).add(c));return!0}else return n(this,i).add(o),!1}hasGuessedLetterAtPosition(e,t){const s=e.toLowerCase();if(t===null){const o=n(d,u)[n(this,l)];return[...Array(o.length).keys()].every(c=>o[c]===e&&n(this,f).has(c)||o[c]!==e)}else return n(this,f).has(t)&&n(this,i).has(s)}guessLetterAtPosition(e,t){if(this.hasGuessedLetterAtPosition(e,t))throw new Error(`Буква "${e}" уже была угадана ранее.`);const s=n(d,u)[n(this,l)],o=e.toLowerCase();if(s[t].toLowerCase()===o)n(this,i).add(o),n(this,f).add(t);else throw new Error(`Неверная буква "${e}" в данной позиции.`)}allLettersGuessed(){const e=n(d,u)[n(this,l)];for(let t=0;t<e.length;t++){const s=e[t].toLowerCase();if(!n(this,i).has(s)&&s!==" ")return!1}return!0}getCurrentWord(){return n(d,u)[n(this,l)]}};u=new WeakMap,l=new WeakMap,i=new WeakMap,f=new WeakMap,h(d,u,["хоровод","пуансеттия","бонбоньерка","простоквашино","Дзюнанушик","декалькомания","Кирибати"]);let L=d;function C(r){return new Promise(function(e,t){const s=new Audio;s.preload="auto",s.autoplay=!0,s.onerror=t,s.onended=e,s.src=r})}const a=new L,g=document.getElementById("wordDisplay"),k=document.getElementById("keyboard"),S=C("./sounds/incorrect.mp3");function y(){const r=a.getCurrentWord();g.innerHTML="";for(let e=0;e<r.length;e++){const t=r[e],s=document.createElement("span");s.classList.add("word-letter"),a.hasGuessedLetterAtPosition(t.toLowerCase(),e)||t===" "?s.textContent=t:s.textContent="_",g.appendChild(s)}}function W(){const r="абвгдеёжзийклмнопрстуфхцчшщъыьэюя";for(const e of r){const t=document.createElement("div");t.classList.add("key"),t.textContent=e,t.addEventListener("click",()=>b(e,t)),k.appendChild(t)}}async function b(r,e){try{const t=a.guessLetter(r.toLowerCase(),null);q(t),t?A(e):(await S.play(),x(e)),y(),a.allLettersGuessed()&&await P()}catch(t){alert(t.message)}}function A(r){r.classList.add("correct")}function x(r){r.classList.add("incorrect")}async function G(r){const e=Array.from(r.target.parentNode.children).indexOf(r.target),t=a.getCurrentWord()[e];a.hasGuessedLetterAtPosition(t.toLowerCase(),e)||(a.guessLetterAtPosition(t,e),a.hasGuessedLetterAtPosition(t,null)&&A(I(t)),y(),a.allLettersGuessed()&&await P())}function I(r){const e=document.querySelectorAll(".key");for(const t of e)if(t.textContent===r)return t;return null}async function P(){C("./sounds/correct.mp3").then(()=>{alert("Поздравляем! Вы отгадали слово."),a.generateNewWord(),y(),O()})}function O(){document.querySelectorAll(".key").forEach(r=>r.classList.remove("incorrect")),document.querySelectorAll(".key").forEach(r=>r.classList.remove("correct"))}function q(r){const e=document.querySelector("#imageContainer"),t=e.querySelector("img"),s="images/",o=r?"correct.png":"incorrect.png";t.src=s+o,e.style.display="block",setTimeout(()=>{e.style.display="none"},3e3)}y();W();g.addEventListener("click",async r=>{r.target.classList.contains("word-letter")&&await G(r)});
